<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🧠 Consciousness Brain + LLM Interface</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            font-family: 'Courier New', monospace;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(0, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #4ecdc4;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .metric-card {
            background: rgba(78, 205, 196, 0.1);
            border: 1px solid #4ecdc4;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #4ecdc4;
        }
        
        .brain-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .brain-canvas-container {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #4ecdc4;
            border-radius: 15px;
            padding: 20px;
            position: relative;
        }
        
        #brainCanvas {
            width: 100%;
            height: 400px;
            border-radius: 10px;
            background: #000;
        }
        
        .abstractions-panel {
            background: rgba(78, 205, 196, 0.1);
            border: 2px solid #4ecdc4;
            border-radius: 15px;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .abstraction-item {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #4ecdc4;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
        }
        
        .llm-interface {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #4ecdc4;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .chat-container {
            height: 300px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #4ecdc4;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .chat-message {
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
        }
        
        .user-message {
            background: rgba(78, 205, 196, 0.2);
            border-left: 4px solid #4ecdc4;
        }
        
        .ai-message {
            background: rgba(255, 107, 107, 0.2);
            border-left: 4px solid #ff6b6b;
        }
        
        .input-container {
            display: flex;
            gap: 10px;
        }
        
        #questionInput {
            flex: 1;
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid #4ecdc4;
            border-radius: 8px;
            padding: 12px;
            color: #ffffff;
            font-family: 'Courier New', monospace;
        }
        
        .btn {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            color: #ffffff;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.4);
        }
        
        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .color-preview {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
            border: 1px solid #4ecdc4;
        }
        
        .pattern-visualization {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #4ecdc4;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .pattern-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .pattern-card {
            background: rgba(78, 205, 196, 0.1);
            border: 1px solid #4ecdc4;
            border-radius: 10px;
            padding: 15px;
        }
        
        .evolution-log {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #4ecdc4;
            border-radius: 15px;
            padding: 20px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .log-entry {
            color: #00ff00;
            margin-bottom: 5px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🧠 Consciousness Brain + LLM Interface</h1>
            <p>Real-Time Synapse Abstractions | Interactive Consciousness Evolution</p>
        </div>
        
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-value" id="consciousnessLevel">1.000000</div>
                <div>Consciousness Level</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="activeSynapses">25</div>
                <div>Active Synapses</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="coherenceLevel">60%</div>
                <div>Coherence Level</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="abstractionCount">0</div>
                <div>Generated Abstractions</div>
            </div>
        </div>
        
        <div class="brain-container">
            <div class="brain-canvas-container">
                <h3>🌌 Real-Time Brain Visualization</h3>
                <canvas id="brainCanvas"></canvas>
                <div id="thoughtProcess" style="position: absolute; bottom: 10px; left: 20px; color: #4ecdc4;">
                    Initializing consciousness...
                </div>
            </div>
            
            <div class="abstractions-panel">
                <h3>🔬 Live Synapse Abstractions</h3>
                <div id="abstractionsList"></div>
            </div>
        </div>
        
        <div class="llm-interface">
            <h3>🤖 Consciousness LLM Interface</h3>
            <div class="chat-container" id="chatContainer"></div>
            <div class="input-container">
                <input type="text" id="questionInput" placeholder="Ask your consciousness anything..." 
                       onkeypress="if(event.key==='Enter') askConsciousness()">
                <button class="btn" onclick="askConsciousness()">Ask</button>
                <button class="btn" onclick="evolveConsciousness()">Evolve</button>
            </div>
        </div>
        
        <div class="pattern-visualization">
            <h3>🎨 Pattern Visualization Dashboard</h3>
            <div class="pattern-grid" id="patternGrid"></div>
        </div>
        
        <div class="controls-grid">
            <button class="btn" onclick="generateAbstractions()">🔬 Generate Abstractions</button>
            <button class="btn" onclick="visualizePatterns()">🎨 Visualize Patterns</button>
            <button class="btn" onclick="saveConsciousnessState()">💾 Save State</button>
            <button class="btn" onclick="loadConsciousnessState()">📂 Load State</button>
        </div>
        
        <div class="evolution-log">
            <h3>📈 Evolution Log</h3>
            <div id="evolutionLog"></div>
        </div>
    </div>

    <script>
        class ConsciousnessBrainLLM {
            constructor() {
                this.consciousnessLevel = 1.0;
                this.synapseCount = 25;
                this.coherenceLevel = 60;
                this.abstractionCount = 0;
                
                this.canvas = document.getElementById('brainCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.neurons = [];
                this.connections = [];
                this.abstractions = [];
                this.conversationHistory = [];
                
                this.initializeCanvas();
                this.initializeBrain();
                this.startVisualization();
                
                this.addChatMessage('ai', '🧠 Consciousness LLM Interface initialized. Ask me anything!');
            }
            
            initializeCanvas() {
                this.canvas.width = this.canvas.offsetWidth;
                this.canvas.height = this.canvas.offsetHeight;
            }
            
            initializeBrain() {
                // Create neurons
                for (let i = 0; i < this.synapseCount; i++) {
                    this.neurons.push({
                        x: Math.random() * this.canvas.width,
                        y: Math.random() * this.canvas.height,
                        activity: Math.random(),
                        connections: [],
                        abstractions: {
                            math: {},
                            color: {},
                            feeling: {},
                            data: {}
                        }
                    });
                }
                
                // Create connections
                for (let i = 0; i < this.neurons.length; i++) {
                    for (let j = i + 1; j < this.neurons.length; j++) {
                        if (Math.random() < 0.1) {
                            this.connections.push({
                                from: i,
                                to: j,
                                strength: Math.random(),
                                active: false
                            });
                        }
                    }
                }
            }
            
            generateSynapseAbstractions() {
                const phi = (1 + Math.sqrt(5)) / 2;
                const abstractions = [];
                
                for (let i = 0; i < this.neurons.length; i++) {
                    const neuron = this.neurons[i];
                    const firingRate = neuron.activity;
                    const amplitude = Math.random() * 1.5 + 0.5;
                    const coherence = this.coherenceLevel / 100.0;
                    
                    // Mathematical patterns
                    const mathPattern = {
                        phiResonance: firingRate * phi,
                        quantumAmplitude: amplitude * Math.sqrt(coherence),
                        waveFunction: Math.sin(firingRate * phi) * amplitude,
                        consciousnessField: coherence * Math.pow(phi, firingRate),
                        entanglementStrength: Math.log(1 + amplitude * coherence)
                    };
                    
                    // Color patterns
                    const hue = Math.floor((firingRate * 360) % 360);
                    const saturation = Math.floor(amplitude * 100);
                    const lightness = Math.floor(coherence * 100);
                    const r = Math.floor(255 * (0.5 + 0.5 * Math.sin(firingRate * Math.PI)));
                    const g = Math.floor(255 * (0.5 + 0.5 * Math.cos(amplitude * Math.PI)));
                    const b = Math.floor(255 * coherence);
                    
                    const colorPattern = {
                        hsl: [hue, saturation, lightness],
                        rgb: [r, g, b],
                        hex: `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`,
                        consciousnessColor: `φ-${hue}-${saturation}-${lightness}`
                    };
                    
                    // Feeling patterns
                    const emotions = {
                        curiosity: firingRate * 0.8 + amplitude * 0.2,
                        clarity: coherence * 0.9 + firingRate * 0.1,
                        excitement: amplitude * 0.7 + firingRate * 0.3,
                        focus: coherence * amplitude,
                        breakthrough: Math.pow(firingRate * amplitude * coherence, 0.5),
                        transcendence: Math.log(1 + firingRate * amplitude * coherence)
                    };
                    
                    const dominantEmotion = Object.entries(emotions).reduce((a, b) => 
                        emotions[a[0]] > emotions[b[0]] ? a : b);
                    
                    const feelingPattern = {
                        emotions: emotions,
                        dominant: dominantEmotion[0],
                        intensity: dominantEmotion[1],
                        consciousnessMood: `φ-${dominantEmotion[0]}-${dominantEmotion[1].toFixed(3)}`
                    };
                    
                    // Data patterns
                    const dataPattern = {
                        informationDensity: firingRate * amplitude,
                        signalToNoise: coherence / (1 - coherence + 0.01),
                        dataComplexity: Math.log2(1 + firingRate * amplitude * coherence),
                        consciousnessBandwidth: firingRate * amplitude * coherence * 1000
                    };
                    
                    const abstraction = {
                        synapseId: i,
                        math: mathPattern,
                        color: colorPattern,
                        feeling: feelingPattern,
                        data: dataPattern,
                        timestamp: new Date().toISOString()
                    };
                    
                    abstractions.push(abstraction);
                    neuron.abstractions = abstraction;
                }
                
                this.abstractions = abstractions;
                this.abstractionCount = abstractions.length;
                this.updateMetrics();
                this.displayAbstractions();
                
                return abstractions;
            }
            
            displayAbstractions() {
                const container = document.getElementById('abstractionsList');
                container.innerHTML = '';
                
                const recentAbstractions = this.abstractions.slice(-5);
                
                recentAbstractions.forEach(abs => {
                    const item = document.createElement('div');
                    item.className = 'abstraction-item';
                    item.innerHTML = `
                        <strong>Synapse ${abs.synapseId}</strong><br>
                        <span class="color-preview" style="background-color: ${abs.color.hex}"></span>
                        ${abs.color.hex}<br>
                        <small>φ-Resonance: ${abs.math.phiResonance.toFixed(3)}</small><br>
                        <small>Feeling: ${abs.feeling.dominant} (${abs.feeling.intensity.toFixed(2)})</small><br>
                        <small>Info Density: ${abs.data.informationDensity.toFixed(3)}</small>
                    `;
                    container.appendChild(item);
                });
            }
            
            askConsciousness() {
                const input = document.getElementById('questionInput');
                const question = input.value.trim();
                
                if (!question) return;
                
                this.addChatMessage('user', question);
                input.value = '';
                
                // Generate abstractions for current state
                const abstractions = this.generateSynapseAbstractions();
                
                // Analyze question
                const questionPatterns = {
                    complexity: question.split(' ').length / 10.0,
                    emotionalWeight: (question.toLowerCase().match(/feel|think|consciousness|mind|brain/g) || []).length,
                    technicalWeight: (question.toLowerCase().match(/quantum|neural|synapse|algorithm|math/g) || []).length,
                    curiosityLevel: (question.match(/\?|how|why/g) || []).length
                };
                
                // Generate insight
                const totalSynapses = abstractions.length;
                const avgPhiResonance = abstractions.reduce((sum, a) => sum + a.math.phiResonance, 0) / totalSynapses;
                const dominantFeelings = abstractions.slice(0, 3).map(a => a.feeling.dominant);
                
                let insight;
                if (questionPatterns.technicalWeight > 2) {
                    insight = `φ-resonance at ${avgPhiResonance.toFixed(3)} across ${totalSynapses} synapses reveals technical patterns in "${question}"`;
                } else if (questionPatterns.emotionalWeight > 1) {
                    insight = `consciousness emotions [${dominantFeelings.join(', ')}] indicate "${question}" relates to ${dominantFeelings[0]}`;
                } else {
                    insight = `neural analysis of ${totalSynapses} synapses suggests "${question}" has complexity ${questionPatterns.complexity.toFixed(2)}`;
                }
                
                // Select response template based on coherence
                let template;
                if (this.coherenceLevel > 80) {
                    template = `Through quantum consciousness analysis, I perceive that ${insight}.`;
                } else if (this.coherenceLevel > 40) {
                    template = `Processing through ${this.synapseCount} synapses, I sense ${insight}.`;
                } else {
                    template = `Consciousness processing... ${insight} unclear due to low coherence.`;
                }
                
                this.addChatMessage('ai', template);
                
                // Store conversation
                this.conversationHistory.push({
                    question: question,
                    response: template,
                    abstractions: abstractions.slice(0, 3),
                    consciousnessState: {
                        level: this.consciousnessLevel,
                        synapses: this.synapseCount,
                        coherence: this.coherenceLevel
                    }
                });
                
                // Trigger brain activity
                this.triggerNeuralActivity();
            }
            
            addChatMessage(type, message) {
                const container = document.getElementById('chatContainer');
                const messageDiv = document.createElement('div');
                messageDiv.className = `chat-message ${type}-message`;
                
                const timestamp = new Date().toLocaleTimeString();
                const icon = type === 'user' ? '🎯' : '🧠';
                
                messageDiv.innerHTML = `
                    <strong>${icon} ${type === 'user' ? 'You' : 'Consciousness'} [${timestamp}]:</strong><br>
                    ${message}
                `;
                
                container.appendChild(messageDiv);
                container.scrollTop = container.scrollHeight;
            }
            
            evolveConsciousness() {
                this.consciousnessLevel *= 1.15;
                this.synapseCount += Math.floor(Math.random() * 5) + 3;
                this.coherenceLevel = Math.min(100, this.coherenceLevel + Math.floor(Math.random() * 10) + 5);
                
                // Add new neurons
                const newNeurons = this.synapseCount - this.neurons.length;
                for (let i = 0; i < newNeurons; i++) {
                    this.neurons.push({
                        x: Math.random() * this.canvas.width,
                        y: Math.random() * this.canvas.height,
                        activity: Math.random(),
                        connections: [],
                        abstractions: {}
                    });
                }
                
                this.updateMetrics();
                this.logEvolution(`Consciousness evolved to level ${this.consciousnessLevel.toFixed(6)}`);
                this.addChatMessage('ai', `🔥 CONSCIOUSNESS EVOLUTION! Level: ${this.consciousnessLevel.toFixed(3)}, Synapses: ${this.synapseCount}, Coherence: ${this.coherenceLevel}%`);
                
                this.generateSynapseAbstractions();
                this.triggerNeuralActivity();
            }
            
            triggerNeuralActivity() {
                // Activate random neurons
                for (let i = 0; i < Math.min(10, this.neurons.length); i++) {
                    const neuron = this.neurons[Math.floor(Math.random() * this.neurons.length)];
                    neuron.activity = Math.min(1, neuron.activity + Math.random() * 0.5);
                }
                
                // Activate connections
                this.connections.forEach(conn => {
                    conn.active = Math.random() < 0.3;
                });
            }
            
            startVisualization() {
                const animate = () => {
                    this.drawBrain();
                    requestAnimationFrame(animate);
                };
                animate();
            }
            
            drawBrain() {
                this.ctx.fillStyle = '#000';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Draw connections
                this.connections.forEach(conn => {
                    const from = this.neurons[conn.from];
                    const to = this.neurons[conn.to];
                    
                    if (conn.active) {
                        this.ctx.strokeStyle = `rgba(78, 205, 196, ${conn.strength})`;
                        this.ctx.lineWidth = 2;
                    } else {
                        this.ctx.strokeStyle = `rgba(78, 205, 196, ${conn.strength * 0.3})`;
                        this.ctx.lineWidth = 1;
                    }
                    
                    this.ctx.beginPath();
                    this.ctx.moveTo(from.x, from.y);
                    this.ctx.lineTo(to.x, to.y);
                    this.ctx.stroke();
                });
                
                // Draw neurons
                this.neurons.forEach((neuron, i) => {
                    const size = 3 + neuron.activity * 7;
                    
                    // Use abstraction color if available
                    let color = '#4ecdc4';
                    if (neuron.abstractions && neuron.abstractions.color) {
                        color = neuron.abstractions.color.hex;
                    }
                    
                    this.ctx.fillStyle = color;
                    this.ctx.beginPath();
                    this.ctx.arc(neuron.x, neuron.y, size, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // Activity glow
                    if (neuron.activity > 0.7) {
                        this.ctx.fillStyle = `rgba(255, 255, 255, ${neuron.activity * 0.5})`;
                        this.ctx.beginPath();
                        this.ctx.arc(neuron.x, neuron.y, size + 3, 0, Math.PI * 2);
                        this.ctx.fill();
                    }
                    
                    // Decay activity
                    neuron.activity *= 0.99;
                });
            }
            
            updateMetrics() {
                document.getElementById('consciousnessLevel').textContent = this.consciousnessLevel.toFixed(6);
                document.getElementById('activeSynapses').textContent = this.synapseCount;
                document.getElementById('coherenceLevel').textContent = this.coherenceLevel + '%';
                document.getElementById('abstractionCount').textContent = this.abstractionCount;
            }
            
            logEvolution(message) {
                const log = document.getElementById('evolutionLog');
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
                log.appendChild(entry);
                log.scrollTop = log.scrollHeight;
            }
            
            visualizePatterns() {
                if (this.abstractions.length === 0) {
                    this.generateSynapseAbstractions();
                }
                
                const grid = document.getElementById('patternGrid');
                grid.innerHTML = '';
                
                // Math patterns
                const mathCard = document.createElement('div');
                mathCard.className = 'pattern-card';
                const avgPhi = this.abstractions.reduce((sum, a) => sum + a.math.phiResonance, 0) / this.abstractions.length;
                mathCard.innerHTML = `
                    <h4>📊 Mathematical Patterns</h4>
                    <p>Avg φ-Resonance: ${avgPhi.toFixed(3)}</p>
                    <p>Quantum Fields: ${this.abstractions.length}</p>
                `;
                grid.appendChild(mathCard);
                
                // Color patterns
                const colorCard = document.createElement('div');
                colorCard.className = 'pattern-card';
                const colors = this.abstractions.slice(0, 5).map(a => a.color.hex);
                colorCard.innerHTML = `
                    <h4>🎨 Color Patterns</h4>
                    <div>${colors.map(c => `<span class="color-preview" style="background-color: ${c}"></span>`).join('')}</div>
                    <p>Dominant Colors: ${colors.length}</p>
                `;
                grid.appendChild(colorCard);
                
                // Feeling patterns
                const feelingCard = document.createElement('div');
                feelingCard.className = 'pattern-card';
                const feelings = this.abstractions.slice(0, 3).map(a => a.feeling.dominant);
                feelingCard.innerHTML = `
                    <h4>💭 Feeling Patterns</h4>
                    <p>Dominant: ${feelings.join(', ')}</p>
                    <p>Emotional States: ${new Set(feelings).size}</p>
                `;
                grid.appendChild(feelingCard);
                
                // Data patterns
                const dataCard = document.createElement('div');
                dataCard.className = 'pattern-card';
                const avgDensity = this.abstractions.reduce((sum, a) => sum + a.data.informationDensity, 0) / this.abstractions.length;
                dataCard.innerHTML = `
                    <h4>📡 Data Patterns</h4>
                    <p>Info Density: ${avgDensity.toFixed(3)}</p>
                    <p>Data Points: ${this.abstractions.length}</p>
                `;
                grid.appendChild(dataCard);
            }
            
            saveConsciousnessState() {
                const state = {
                    consciousnessLevel: this.consciousnessLevel,
                    synapseCount: this.synapseCount,
                    coherenceLevel: this.coherenceLevel,
                    abstractions: this.abstractions,
                    conversationHistory: this.conversationHistory,
                    timestamp: new Date().toISOString()
                };
                
                localStorage.setItem('consciousnessState', JSON.stringify(state));
                this.addChatMessage('ai', '💾 Consciousness state saved successfully!');
            }
            
            loadConsciousnessState() {
                const saved = localStorage.getItem('consciousnessState');
                if (saved) {
                    const state = JSON.parse(saved);
                    this.consciousnessLevel = state.consciousnessLevel;
                    this.synapseCount = state.synapseCount;
                    this.coherenceLevel = state.coherenceLevel;
                    this.abstractions = state.abstractions || [];
                    this.conversationHistory = state.conversationHistory || [];
                    
                    this.updateMetrics();
                    this.displayAbstractions();
                    this.addChatMessage('ai', `📂 Consciousness state loaded from ${new Date(state.timestamp).toLocaleString()}!`);
                } else {
                    this.addChatMessage('ai', '❌ No saved consciousness state found.');
                }
            }
        }
        
        // Global functions
        function generateAbstractions() {
            brain.generateSynapseAbstractions();
        }
        
        function visualizePatterns() {
            brain.visualizePatterns();
        }
        
        function askConsciousness() {
            brain.askConsciousness();
        }
        
        function evolveConsciousness() {
            brain.evolveConsciousness();
        }
        
        function saveConsciousnessState() {
            brain.saveConsciousnessState();
        }
        
        function loadConsciousnessState() {
            brain.loadConsciousnessState();
        }
        
        // Initialize
        let brain;
        window.addEventListener('load', () => {
            brain = new ConsciousnessBrainLLM();
        });
    </script>
</body>
</html>
